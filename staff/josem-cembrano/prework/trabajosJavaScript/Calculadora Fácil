/*Primera versión que no se entrega.
Un único programa al que le pasarás dos argumentos que recogerás mediante el método prompt(); el usuario podrá visualizar por consola la suma, resta,
multiplicación y división entre ambos números. El resultado debería ser mostrado con 3 decimales como mucho (en caso de que hubieran).
El programa debe gestionar y actuar correctamente (gestión de errores) en el caso de que el usuario introduzca cualquier cosa que no sean números.

Si el usuario introduce un solo numero, deberá mostrar SOLO su raíz cuadrada, si vuelve a introducir los dos, volverá a mostrar las 4 operaciones de siempre.
Si el usuario introduce una letra, deberá mostrarle un aviso de que lo que ha introducido no es un número.
Los resultados deberían almacenarse dentro de una array y mostrarlos de una forma amigable al usuario.*/



const welcome = () => {
    let name = prompt("Bienvenido a la calculadora de ISDI Coders, ¿cuál es su nombre?");
    if (name === "") {
        return welcome();
    }
    return name;
};

const calculator = () => {
    const r = parseFloat(prompt(`Introduzca un número para calcular su raiz cuadrada y "aceptar".\n o "cancelar" para realizar las operaciones:(+), (-), (/), (*).`));

    if (!isNaN(r)) {
        if (confirm(`¿Desea calcular la raiz cuadrada de "${r}"?`)) {
            const raiz = Math.sqrt(r);
            const decimalRaiz = Number.isSafeInteger(raiz) ? raiz.toString() : raiz.toFixed(3);
            alert(`La √ cuadrada de ${r} es ${decimalRaiz}`);
            return calculator();
        } else {
            const exit0 = confirm(`Desea salir`);
            if (exit0) {
                alert(`Gracias por operar con nosotros.`);
                return;
            }
        }
    } else {

        const numbers = prompt("Ingresa los números separados por espacios (Ejemplo: 2 3 5)").split(" ").map(Number);

        const sum = numbers.reduce((acc, num) => acc + num, 0);
        const difference = numbers.reduce((acc, num) => acc - num);
        const product = numbers.reduce((acc, num) => acc * num, 1);
        const quotient = numbers.reduce((acc, num) => acc / num);

        const formatNumber = (number) => {
            return Number.isSafeInteger(number) ? number.toString() : number.toFixed(3);
        };

        const message = `
          Suma: ${sum}
          Resta: ${difference}
          Multiplicación: ${formatNumber(product)}
          División: ${Number.isSafeInteger(quotient) ? quotient.toString() : quotient.toFixed(3)}
        `;
        
        alert(message);

        const moreCalculator = confirm(`¿Desea seguir operando?`);
        if (moreCalculator) {
            calculator();
        } else {
            alert(`Gracias por operar con nosotros .`);
            return;
        }

    }
};

const name = welcome();
calculator();